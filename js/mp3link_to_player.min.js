!function(i,e){if(void 0!==e){var t=e.MSE,a=e.SimpleHLS,n=e.PlayerManager,o=e.PlayerObserver.SimplePlayerObserver,s=(e.convertURL2URI,"undefined"!=typeof navigator&&"mediaSession"in navigator&&navigator.mediaSession||null),r=function(){var i=0,n=20;function o(e,a,o){if(!a||!(t.isSupported()&&(a.offsetInfo||a.m3u8link)||a.filePath))throw new Error("No source found.");this._targetDOM=e,this._id=i++,this._audio=document.createElement("audio"),this._description=a,this._MSE=null,this._useMediaSession=void 0===o||o,this._mediaSessionForwardTime=n,this._mediaSessionBackwardTime=n,this._destruct=!1,this._audio.preload="metadata",this._audio.controls=!0,this._audio.setAttribute("controlslist",["nodownload"]),this._onAudioPlayingHandler=this._onAudioPlaying.bind(this),this._init()}return o.prototype._init=function(){var i=!0,n=12;if(e&&e.config){var o=e.config;i=o.use_mp3_realtime_streaming,n=o.mp3_realtime_buffer_size;void 0!==o.mediaSessionForwardTime&&(this._mediaSessionForwardTime=o.mediaSessionForwardTime),void 0!==o.mediaSessionBackwardTime&&(this._mediaSessionBackwardTime=o.mediaSessionBackwardTime)}this._targetDOM.parentNode.replaceChild(this._audio,this._targetDOM),i&&t.isSupported()?(this._MSE=this._description.m3u8link?new a(this._audio,this._description.m3u8link,this._description.file_srl,n):new t(this._audio,this._description.offsetInfo,{mp3url:this._description.filePath,file_srl:this._description.file_srl,bufferSize:n}),this._MSE.provideCacheManager(e.MemoryCacheManager)):(this._audio.src=this._description.filePath,this._audio.load()),this._audio.addEventListener("playing",this._onAudioPlayingHandler,!1)},o.prototype._updateMediaSessionMetadata=function(){if(s)if(void 0!==this._description.tags){var i=e.config,t=i.default_cover,a=i.use_thumbnail;t&&(t=e.convertURL2URI(t));var n=this._description.tags,o=n.albumArt;o||(a&&this._description.thumbnail?o=this._description.thumbnail:t&&(o=t)),s.metadata=new window.MediaMetadata({title:n.title?n.title:void 0,artist:n.artist?n.artist:void 0,album:n.album?n.album:void 0,artwork:o?[{src:o}]:void 0})}else s.metadata=void 0},o.prototype._registerMediaSessionHandlers=function(){if(s){var i=this;s.setActionHandler("play",function(){i._audio.play()}),s.setActionHandler("pause",function(){i._audio.pause()}),s.setActionHandler("seekbackward",function(){i._audio.currentTime=Math.max(0,i._audio.currentTime-i._mediaSessionBackwardTime)}),s.setActionHandler("seekforward",function(){i._audio.currentTime=Math.min(i._audio.duration||0,i._audio.currentTime+i._mediaSessionForwardTime)}),s.setActionHandler("previoustrack",null),s.setActionHandler("nexttrack",null)}},o.prototype._onAudioPlaying=function(){this._useMediaSession&&(this._updateMediaSessionMetadata(),this._registerMediaSessionHandlers())},o.prototype.getAudioNode=function(){return this._audio},o.prototype.destruct=function(){this._destruct||(this._audio.removeEventListener("playing",this._onAudioPlayingHandler,!1),null!==this._playingObserverTimerID&&(window.clearTimeout(this._playingObserverTimerID),this._playingObserverTimerID=null),this._MSE&&this._MSE.destruct())},o}();i(document).ready(function(){var t=function(t){a&&(a.remove(),a=null),t&&t.length&&i(".xe_content a").each(function(){var a,s=i(this),d=s.attr("href"),u=s.attr("data-file-srl")||null,l=u?parseInt(u,10):NaN;if((a=d)&&((a=a.toLowerCase()).indexOf(".mp3")>-1||a.indexOf(".m4a")>-1||a.indexOf(".ogg")>-1)){var c=t.find(function(i){var e=i.description,t=e&&e.uploaded_filename?e.uploaded_filename.replace(/^.\/files/i,"/files"):null;return l&&!isNaN(l)&&e.file_srl===l||t&&d&&d.indexOf(t)>-1});if(c){var _=!(!e.config||!e.config.use_mediasession),h=new r(this,c.description,_);n.registerPlayer(new o(h))}}})},a=null;e.audioDescriptions&&e.audioDescriptions.length>0?t(e.audioDescriptions):a=e.onAudioDescriptionLoad.subscribe(t)})}}(window.jQuery,window.$SimpleMP3Player);